name: ci

on:
  push:
  schedule:
    - cron:  '0 17 * * 1'

jobs:
  test:
    runs-on: macos-11

    steps:
    - uses: actions/checkout@v3
    - run:  ./dot.sh help
    - run:  ./dot.sh link
    - run:  ./dot.sh install-defaults

  test-brew:
    runs-on: macos-11

    steps:
    - uses: actions/checkout@v3
    - run:  brew uninstall go@1.15
    - run:  ./dot.sh install-brew
      env:
        HOMEBREW_BUNDLE_BREW_SKIP: 'awscli node'

  test-fisher:
    runs-on: macos-11

    steps:
    - uses: actions/checkout@v3
    - run:  ./dot.sh link
    - run:  ./dot.sh install-fisher

  test-nix:
    runs-on: macos-11

    steps:
    - uses: actions/checkout@v3
    - run:  ./dot.sh install-nix

  test-vim:
    runs-on: macos-11

    steps:
    - uses: actions/checkout@v3
    - run:  ./dot.sh install-vim
